extensions_cfg:
  defaults:
    delivery_dashboard_url: ... # must be publicly accessible
    delivery_service_url: ... # e.g. http://delivery-service.<target-namespace>.svc.cluster.local:8080
  access_manager:
    enabled: true
  artefact_enumerator:
    components:
      - component_name: ocm.software/ocm-gear
  bdba:
    enabled: False # disable in default because of missing BDBA credentials and `group-id`
    mappings:
      - prefix: ''
        group_id: -1
  cache_manager:
    prefill_function_caches:
      components:
        - component_name: ocm.software/ocm-gear
  clamav:
    mappings:
      - prefix: ''
  issue_replicator:
    enabled: False # disable in default because of missing `github_repository`
    mappings:
      - prefix: ''
        github_repository: ''
  osid:
    enabled: true
  responsibles:
    rules:
      - name: ocm-software-components
        filters:
          - type: match-all
        strategies:
          - type: component-responsibles
  sast:
    enabled: true

findings:
  - type: finding/vulnerability
    issues:
      enable_assignees: false
    categorisations: &gardener_default
      cfg_name: gardener
      ref:
        path: odg/defaults.yaml
    rescoring_ruleset:
      <<: *gardener_default
  - type: finding/license
    issues:
      enable_assignees: false
    categorisations:
      <<: *gardener_default
  - type: finding/malware
    issues:
      enable_assignees: false
    categorisations:
      <<: *gardener_default
  - type: finding/osid
    issues:
      enable_assignees: false
    categorisations:
      <<: *gardener_default
  - type: finding/sast
    issues:
      enable_assignees: false
    categorisations:
      <<: *gardener_default
    default_scope: single

ocm_repo_mappings:
  - prefix: ''
    repository: europe-docker.pkg.dev/gardener-project/releases
  - prefix: ''
    repository: europe-docker.pkg.dev/gardener-project/snapshots

features_cfg:
  specialComponents:
    - id: e60f2588-3f97-4d6f-9ac4-92ab36dcdb4e
      name: ocm.software/ocm-gear
      displayName: Open Delivery Gear
      type: ODG
      version: greatest
      icon: home
  sprints:
    sprint_name_pattern: '%y%S%C'
    meta:
      offsets:
        - name: release_decision
          display_name: Release Decision
          offset_days: -1

addressbook:
  - name: My name
    email: my-name@my-domain.com
    github:
      public: my-github-username

github_mappings:
  - name: public
    api_url: https://api.github.com

secrets:
  # bdba:
  #   primary:
  #     api_url: ...
  #     token: ...
  delivery-db:
    primary:
      username: postgres
      password: abcdefghijklmnop
  github: # not required if `github-app` is configured instead
    github-com:
      api_url: https://api.github.com
      http_url: https://github.com
      repo_urls: ['.*']
      username: ...
      auth_token: ...
  github-app:
    github-com:
      api_url: https://api.github.com
      app_id: ...
      mappings:
        - installation_id: ...
          org: ...
      private_key: |
        -----BEGIN RSA PRIVATE KEY-----
        ...
        -----END RSA PRIVATE KEY-----
  oauth-cfg:
    primary:
      name: GitHub
      type: github
      api_url: https://api.github.com
      client_id: ...
      client_secret: ...
      role_bindings:
        - roles:
            - writer # reader, writer, admin
          subjects:
            - type: github-org
              name: ... # <org-name>
            - type: github-team
              name: ... # <org-name>/<team-name>
            - type: github-user
              name: ... # <username>
            - type: github-app
              name: ... # <app-name>
  signing-cfg:
    primary:
      id: 5e1688f9-b032-4a9b-99ee-9ff2eb3cbcb5
      algorithm: RS256
      private_key: |
        -----BEGIN RSA PRIVATE KEY-----
        ... # todo: generate this if not provided
        -----END RSA PRIVATE KEY-----
      public_key: |
        -----BEGIN PUBLIC KEY-----
        ... # todo: generate this if not provided
        -----END PUBLIC KEY-----
